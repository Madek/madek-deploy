
rubies:
  jruby:
    version: jruby-9.0.3.0
    alias: jruby-9000
  mri:
    version: 2.2.3
    alias: 2.2
    present: True
    default: True

rails_env: production

secret_key_base: '{{madek_master_secret}}'

madek_web_context_or_slash: '{{madek_web_context | regex_replace("^$","/") }}'
madek_web_context_or_empty: '{{madek_web_context | regex_replace("^\/$", "") }}'

madek_configuration_management_url: 'http://localhost:{{madek_webapp_port}}{{madek_web_context}}/configuration_management_backdoor/invoke'

madek_user: "{{madek_base_name}}"
madek_user_home: "/home/{{madek_user}}"

madek_root_dir: '/var/local/{{madek_base_name}}'

madek_webapp_dir: "{{madek_root_dir}}/webapp"
madek_webapp_service_name: "{{madek_base_name}}_webapp"

madek_admin_dir: "{{madek_root_dir}}/admin-webapp"
madek_admin_service_name: "{{madek_base_name}}_admin-webapp"


madek_api_dir: "{{madek_root_dir}}/api"
madek_api_service_name: "{{madek_base_name}}_api"

madek_services:

  - name: "{{madek_api_service_name}}"
    port: "{{madek_api_port}}"
    path: "{{madek_web_context_or_empty}}/api"
    config_file_name: "{{madek_api_service_name}}_at_{{madek_api_port}}"

  - name: "{{madek_webapp_service_name}}"
    port: "{{madek_webapp_port}}"
    path: "{{madek_web_context_or_empty}}/"
    config_file_name: "{{madek_webapp_service_name}}_at_{{madek_webapp_port}}"

  - name: "{{madek_admin_service_name}}"
    port: "{{madek_admin_port}}"
    path: "{{madek_web_context_or_empty}}/"
    config_file_name: "{{madek_admin_service_name}}_at_{{madek_admin_port}}"



# database
database:
  user: "{{madek_user}}"
  password: "{{madek_database_secret}}"
  hostname: localhost
  port: 5432
  name: "{{madek_base_name}}_production"
  pool: 10
