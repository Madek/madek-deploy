#!/usr/bin/env bash

QUIETARGS=$1 # call this script with `-qqq` for more quietness
DEPLOY_DIR="$(cd -- "$(dirname "${BASH_SOURCE}")" ; cd .. > /dev/null 2>&1 && pwd -P)"

{

python3 -m venv ${DEPLOY_DIR}/.virtualenv
source ${DEPLOY_DIR}/.virtualenv/bin/activate
pip install $QUIETARGS -r ${DEPLOY_DIR}/ansible-requirements.txt

} || { echo 'ERROR!'; exit 1; }
